!function(r,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():r.MarvelRandom=e()}(this,function(){"use strict";function r(r){p=r}function e(r){t(),r=r||{},r.success=r.success||i,r.error=r.error||i,r.id?o(r):n(r)}function t(r){if(!p&&!r.apiKey)throw new Error("You must first call setApiKey before MarvelRandom can do anything...")}function n(r){var e=1478,t=r.characterOffset||u(0,e);return s({apiUrl:"/v1/public/characters",params:{limit:r.totalCharacters||1,offset:t},success:r.success,error:r.error})}function o(r){return s({apiUrl:"/v1/public/characters/"+r.id,success:r.success,error:r.error})}function s(r){var e=r.params||{};e.apikey=e.apikey||p;var t=a(e),n="http://gateway.marvel.com:80";return f(n+r.apiUrl+"?"+t,r.success,r.error)}function a(r){var e=[];return c(r,function(r,t){e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}),e.join("&")}function c(r,e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t,r)}function u(r,e){return Math.floor(Math.random()*(e-r+1))+r}function i(){}function f(r,e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onload=function(){var r=JSON.parse(n.responseText);n.status>=200&&n.status<400?e(r,n.status,n):t(r,n.status,n)},n.onerror=function(){t(n.responseText,n.status,n)},n.send()}var p=null;return{setApiKey:r,getCharacter:e}});